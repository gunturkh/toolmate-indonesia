---
import { Image } from 'astro:assets';
import BaseLayout from '@layouts/BaseLayout.astro';
import { downloads } from '@data/downloads';
import { pageSEO } from '@data/seo';

const benefits = [
  "Reduces BOD, COD, TSS and Sludge volume",
  "Instantly eliminates bad odor (Ammonia/H2S)",
  "Digests wastes and sludge which gives bad odor due to fermentation",
  "Inhibits the growth of algae to improve water quality",
  "Controls pathogenic bacteria (Clostridium, Vibro cholera, Staphylococcus, E-coli, Salmonella)",
  "Reduces energy cost and increases efficiency of sewage treatment",
  "100% natural ingredients - environmentally friendly and easy to use",
  "Can work at pH 5-9 and temperatures 0°C - 60°C"
];

const dosageData = [
  { app: "Sewage Treatment (STP)", system: "100 m³/day", standard: "0.5 ppm / day", initial: "5 ppm (Day 1-4), then 2 ppm (Day 2-4)" },
  { app: "Industrial Waste (WWTP)", system: "100 m³/day", standard: "1 ppm / day", initial: "10 ppm (Day 1), 5 ppm (Day 2-4)" },
  { app: "Grease Trap / Oil Separator", system: "5 m³/day", standard: "5 ppm / day", initial: "50 ppm (Day 1), 20 ppm (Day 2-4)" },
  { app: "Septic Tank / Sump Pit", system: "10 m³ tank", standard: "0.5 ppm / week", initial: "5 ppm weekly" },
  { app: "Large Scale WWTP", system: "500 m³/day", standard: "2 ppm / day", initial: "15 ppm (Day 1), 10 ppm (Day 2-4)" }
];

const provenResults = [
  {
    beforeImg: "/images/products/biology-genesis/mcdonalds-grease-trap-before.png",
    afterImg: "/images/products/biology-genesis/mcdonalds-grease-trap-after.png",
    title: "McDonald's Grease Trap (Restaurant Industry)",
    description: "Application on 4 grease trap tanks with 8m³ total capacity. No skimming during trial. Reduced oil/grease and destroyed clumped sludge within 5 days treatment (50 gram/day dosage)."
  },
  {
    beforeImg: "/images/products/biology-genesis/sosro-wwtp-before.png",
    afterImg: "/images/products/biology-genesis/sosro-wwtp-after.png",
    title: "Teh Botol Sosro (Tea Factory WWTP)",
    description: "Significant COD, BOD, TSS and sludge volume reduction. Water color changed from black to brownish within 16 days of treatment."
  },
  {
    beforeImg: "/images/products/biology-genesis/mayora-lab-samples.png",
    afterImg: "/images/products/biology-genesis/treatment-process-diagram.png",
    title: "Mayora (Food Factory WWTP)",
    description: "50% sludge reduction before and after treatment. Odor almost eliminated. Water changed from black to brownish. Chemical usage (coagulant & flocculant) reduced by up to 30%."
  }
];

const applications = [
  "Palm Oil Mill Effluent Pond (POME)",
  "Rubber Mill Waste Water",
  "Industrial Waste Water",
  "Lake Pond & Water Reservoir",
  "Sewage Treatment Plant",
  "Grease Trap & Clarifier",
  "Leachate Pond",
  "River & Canal",
  "Domestic Waste",
  "Hospital Waste",
  "Hotel and Restaurant Waste",
  "Farm & Animal Husbandry",
  "Trash cans and toilets"
];
---

<BaseLayout
  title={pageSEO.products.title}
  description={pageSEO.products.description}
  keywords={pageSEO.products.keywords}
  type={pageSEO.products.type}
  activePage="products"
  flexLayout={true}
>

  <!-- HERO -->
  <div class="bg-green-900 pt-32 pb-20 text-center relative overflow-hidden">
    <div class="absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/leaf.png')]"></div>
    <div class="relative z-10">
      <span class="inline-block py-1 px-3 rounded-full bg-green-700 text-green-100 text-xs font-bold uppercase mb-4">Biology Genesis</span>
      <h1 class="text-4xl md:text-5xl font-bold text-white mb-4">Biology Genesis</h1>
      <p class="text-green-100 max-w-2xl mx-auto">Natural Bio Technology Solution for Industrial Waste Water Treatment.</p>
    </div>
  </div>

  <!-- PRODUCT INFO -->
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-16">
      <div>
        <h2 class="text-3xl font-bold text-brand-biocon mb-6">What is Biology Genesis?</h2>
        <p class="text-slate-600 mb-6 leading-relaxed">
          Biology Genesis is a group of human-friendly and beneficial bacteria & yeast. It is a natural culture without harsh chemical mixtures. It is certified safe, non-toxic, and free of pathogenic bacteria.
        </p>
        <h3 class="font-bold text-lg mb-3">Major Benefits:</h3>
        <ul class="space-y-3 mb-8">
          {benefits.map((benefit) => (
            <li class="flex items-start">
              <i class="fas fa-check-circle text-brand-bio mt-1 mr-3"></i> {benefit}
            </li>
          ))}
        </ul>
      </div>
      <div>
        <div class="grid grid-cols-3 gap-3 mb-6">
          <img src="/images/products/biology-genesis/biology-genesis-bio.jpeg" class="rounded-lg shadow-xl w-full h-48 object-cover" alt="Biology Genesis Bio" loading="eager" />
          <img src="/images/products/biology-genesis/biology-genesis-pome-single.jpeg" class="rounded-lg shadow-xl w-full h-48 object-cover" alt="Biology Genesis POME Single" loading="eager" />
          <img src="/images/products/biology-genesis/biology-genesis-pome-multiple.jpeg" class="rounded-lg shadow-xl w-full h-48 object-cover" alt="Biology Genesis POME Multiple" loading="eager" />
        </div>
        <div class="bg-green-50 p-4 rounded-lg border border-green-100 mb-6">
          <h4 class="font-bold text-green-800 mb-3">Wide Range of Application:</h4>
          <div class="grid grid-cols-2 gap-2 text-sm text-green-700">
            {applications.map((app) => (
              <div class="flex items-start">
                <i class="fas fa-leaf text-green-500 mr-2 mt-1 text-xs"></i>
                <span>{app}</span>
              </div>
            ))}
          </div>
        </div>
        <div class="bg-blue-50 p-4 rounded-lg border border-blue-100">
          <h4 class="font-bold text-blue-800 mb-2">Certifications:</h4>
          <p class="text-sm text-blue-700">Tested by Food Research Center Foundation of Japan - certified non-toxic and not harmful to humans and animals. Also certified by Health Science Office of Ministry of Health of Thailand as free of pathogenic bacteria. Registered with BPOM (Indonesian Food and Drug Administration).</p>
        </div>
      </div>
    </div>

    <!-- DOSAGE TABLE -->
    <div class="mt-20">
      <h2 class="text-2xl font-bold text-center mb-8">Application Guide & Dosage</h2>
      <div class="overflow-x-auto">
        <table class="min-w-full bg-white border border-slate-200 text-sm">
          <thead class="bg-brand-navy text-white">
            <tr>
              <th class="py-3 px-4 text-left">Application</th>
              <th class="py-3 px-4 text-left">System</th>
              <th class="py-3 px-4 text-left">Standard Dosage (Maintenance)</th>
              <th class="py-3 px-4 text-left">Initial/Shock Dosing</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-slate-200">
            {dosageData.map((row) => (
              <tr>
                <td class="py-3 px-4 font-bold">{row.app}</td>
                <td class="py-3 px-4">{row.system}</td>
                <td class="py-3 px-4">{row.standard}</td>
                <td class="py-3 px-4">{row.initial}</td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
      <p class="text-xs text-slate-500 mt-2 italic">* Exact dosage may vary based on pH (5-9) and dissolved oxygen levels. Consult our engineers.</p>
    </div>

    <!-- PROVEN RESULTS -->
    <div class="mt-20">
      <h2 class="text-2xl font-bold text-center mb-10">Proven Results - Application Reports</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        {provenResults.map((result) => (
          <div class="bg-white p-4 shadow rounded border border-slate-100">
            <div class="flex gap-2 mb-4">
              <div class="w-1/2">
                <p class="text-xs text-slate-500 mb-1 text-center">Before</p>
                <div class="relative group cursor-pointer" data-lightbox-img={result.beforeImg} data-lightbox-title={`${result.title} - Before`}>
                  <img src={result.beforeImg} class="w-full h-32 object-cover grayscale rounded transition-transform group-hover:scale-105" alt="Before" loading="lazy" decoding="async" />
                  <div class="absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors rounded flex items-center justify-center">
                    <i class="fas fa-search-plus text-white opacity-0 group-hover:opacity-100 transition-opacity text-lg"></i>
                  </div>
                </div>
              </div>
              <div class="w-1/2">
                <p class="text-xs text-slate-500 mb-1 text-center">After</p>
                <div class="relative group cursor-pointer" data-lightbox-img={result.afterImg} data-lightbox-title={`${result.title} - After`}>
                  <img src={result.afterImg} class="w-full h-32 object-cover rounded transition-transform group-hover:scale-105" alt="After" loading="lazy" decoding="async" />
                  <div class="absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors rounded flex items-center justify-center">
                    <i class="fas fa-search-plus text-white opacity-0 group-hover:opacity-100 transition-opacity text-lg"></i>
                  </div>
                </div>
              </div>
            </div>
            <h3 class="font-bold text-green-800">{result.title}</h3>
            <p class="text-sm text-slate-600">{result.description}</p>
          </div>
        ))}
      </div>
    </div>

    <!-- BIOLOGY GENESIS -->
    <div class="mt-20 bg-slate-50 -mx-4 sm:-mx-6 lg:-mx-8 px-4 sm:px-6 lg:px-8 py-12">
      <div class="max-w-4xl mx-auto text-center">
        <span class="inline-block py-1 px-3 rounded-full bg-green-100 text-green-800 text-xs font-bold uppercase mb-4">Also Available</span>
        <h2 class="text-2xl font-bold text-brand-navy mb-4">Biology Genesis</h2>
        <p class="text-slate-600 mb-6">
          Biology Genesis contains various types of bacteria and enzymes which are able to break down various types of industrial wastewater effectively and efficiently. Can be used as a starter for decomposing microbes or in combination with native microbes in waste ponds.
        </p>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 text-left">
          <div class="bg-white p-6 rounded-lg shadow-sm">
            <h3 class="font-bold text-green-800 mb-3">Major Effects</h3>
            <ul class="space-y-2 text-sm text-slate-600">
              <li><i class="fas fa-check text-green-500 mr-2"></i>Reduces unpleasant odors</li>
              <li><i class="fas fa-check text-green-500 mr-2"></i>Reducing BOD, COD, TSS and other organic parameters</li>
              <li><i class="fas fa-check text-green-500 mr-2"></i>Effective in pool maintenance process</li>
              <li><i class="fas fa-check text-green-500 mr-2"></i>Reduces operational costs in WWTP</li>
              <li><i class="fas fa-check text-green-500 mr-2"></i>High growth rate (2-72 hours)</li>
              <li><i class="fas fa-check text-green-500 mr-2"></i>Suppresses pathogenic microorganisms</li>
            </ul>
          </div>
          <div class="bg-white p-6 rounded-lg shadow-sm">
            <h3 class="font-bold text-green-800 mb-3">Working Parameters</h3>
            <ul class="space-y-2 text-sm text-slate-600">
              <li><i class="fas fa-cog text-green-500 mr-2"></i>pH range: 5-9</li>
              <li><i class="fas fa-thermometer-half text-green-500 mr-2"></i>Temperature: 0°C - 60°C</li>
              <li><i class="fas fa-tint text-green-500 mr-2"></i>Dissolved oxygen: up to 0.5 ppm</li>
              <li><i class="fas fa-water text-green-500 mr-2"></i>Salinity: up to 5% (brackish)</li>
              <li><i class="fas fa-leaf text-green-500 mr-2"></i>Works in aerobic and anaerobic conditions</li>
              <li><i class="fas fa-utensils text-green-500 mr-2"></i>Effective for carbohydrates, fiber, fat, oil, protein</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- DOWNLOAD SECTION -->
  <div class="bg-green-50 py-16 border-t border-green-100">
    <div class="max-w-7xl mx-auto px-4">
      <h3 class="text-2xl font-bold text-green-900 mb-8 text-center">Product Downloads</h3>
      <div class="flex flex-col md:flex-row justify-center gap-6">
        <a href={downloads.productBrochure.url} target="_blank" class="flex items-center bg-white px-6 py-4 rounded-lg shadow-sm border border-green-200 hover:shadow-md transition group">
          <i class={`fas ${downloads.productBrochure.icon} text-green-600 text-2xl mr-4`}></i>
          <div class="text-left">
            <span class="block font-bold text-green-900">{downloads.productBrochure.title}</span>
            <span class="block text-xs text-slate-500 group-hover:text-green-600">{downloads.productBrochure.subtitle}</span>
          </div>
        </a>
        <a href={downloads.msdsLabReport.url} target="_blank" class="flex items-center bg-white px-6 py-4 rounded-lg shadow-sm border border-green-200 hover:shadow-md transition group">
          <i class={`fas ${downloads.msdsLabReport.icon} text-green-600 text-2xl mr-4`}></i>
          <div class="text-left">
            <span class="block font-bold text-green-900">{downloads.msdsLabReport.title}</span>
            <span class="block text-xs text-slate-500 group-hover:text-green-600">{downloads.msdsLabReport.subtitle}</span>
          </div>
        </a>
      </div>
    </div>
  </div>

  <!-- Lightbox -->
  <div id="lightbox" class="fixed inset-0 bg-black/90 z-50 hidden items-center justify-center p-4">
    <button id="lightbox-close" class="absolute top-4 right-4 text-white/80 hover:text-white transition z-10">
      <i class="fas fa-times text-3xl"></i>
    </button>
    <button id="lightbox-prev" class="absolute left-4 top-1/2 -translate-y-1/2 text-white/80 hover:text-white transition">
      <i class="fas fa-chevron-left text-3xl"></i>
    </button>
    <button id="lightbox-next" class="absolute right-4 top-1/2 -translate-y-1/2 text-white/80 hover:text-white transition">
      <i class="fas fa-chevron-right text-3xl"></i>
    </button>
    <img id="lightbox-img" src="" alt="" class="max-w-full max-h-[85vh] object-contain" />
    <div class="absolute bottom-4 left-0 right-0 text-center">
      <p id="lightbox-title" class="text-white font-bold text-lg"></p>
    </div>
  </div>

  <script>
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightbox-img') as HTMLImageElement;
    const lightboxTitle = document.getElementById('lightbox-title');
    const lightboxClose = document.getElementById('lightbox-close');
    const lightboxPrev = document.getElementById('lightbox-prev');
    const lightboxNext = document.getElementById('lightbox-next');

    const images = document.querySelectorAll('[data-lightbox-img]');
    let currentIndex = 0;

    const imageData = Array.from(images).map((el) => ({
      src: el.getAttribute('data-lightbox-img'),
      title: el.getAttribute('data-lightbox-title') || ''
    }));

    function showImage(index: number) {
      if (index < 0) index = imageData.length - 1;
      if (index >= imageData.length) index = 0;
      currentIndex = index;

      const data = imageData[currentIndex];
      if (lightboxImg && data.src) lightboxImg.src = data.src;
      if (lightboxTitle) lightboxTitle.textContent = data.title;
    }

    images.forEach((el, index) => {
      el.addEventListener('click', () => {
        showImage(index);
        if (lightbox) lightbox.classList.remove('hidden');
        if (lightbox) lightbox.classList.add('flex');
      });
    });

    function closeLightbox() {
      if (lightbox) lightbox.classList.add('hidden');
      if (lightbox) lightbox.classList.remove('flex');
    }

    lightboxClose?.addEventListener('click', closeLightbox);
    lightboxPrev?.addEventListener('click', () => showImage(currentIndex - 1));
    lightboxNext?.addEventListener('click', () => showImage(currentIndex + 1));

    lightbox?.addEventListener('click', (e) => {
      if (e.target === lightbox) closeLightbox();
    });

    document.addEventListener('keydown', (e) => {
      if (lightbox?.classList.contains('hidden')) return;
      if (e.key === 'Escape') closeLightbox();
      if (e.key === 'ArrowLeft') showImage(currentIndex - 1);
      if (e.key === 'ArrowRight') showImage(currentIndex + 1);
    });
  </script>

</BaseLayout>
